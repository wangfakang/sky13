{"name":"Sky13","tagline":"nginx reload 过程","body":"`nginx -s reload对性能的影响`    \r\n\r\n一.nginx reload的过程:\r\n=====\r\n   首先是nginx执行这样一个命令其nginx的内部hi如何做饿恩?其整个过程是这样的------首先nginx master进程收到该信号\r\n的时候就会通知worker子进程,让其不在listen fd[即旧的worker进程不在接受新饿连接请求],然后fork新worker子进程然\r\n后进行读取配置文件饿内容进行初始化新的worker进程.\r\n\r\n二.注意其实在执行nginx -s reload会有这样几个问题:   \r\n=====\r\n \r\n##  1.若有大量请求,此时会丢请求.  \r\n   * 原因是,在上面介绍的reload的过程中说旧的worker子进程此时不接受新的连接请求,但是若果在新饿子进程产生的那一刻\r\n有很多的请求饿时候则会导致请求丢失.   \r\n   \r\n## 2.若此时worker子进程比较多则会很耗费内存.    \r\n  * 由于老的worker子进程要把当前的请求饿任务处理完成才会释放worker进程的资源,所以若果老的worker和后端的机器\r\nkeepalive什么的话则在一段时间内nginx的worker进程个数会随着reload的次数成倍数增加.      \r\n\r\n代码分析后续补上~      \r\n\r\n欢迎一起交流学习 \r\n====\r\n \r\n在使用中有任何问题，欢迎反馈给我，可以用以下联系方式跟我交流\r\n\r\n* 邮件(1031379296#qq.com, 把#换成@)\r\n* QQ: 1031379296\r\n* weibo: [@王发康](http://weibo.com/u/2786211992/home)\r\n\r\n\r\nThx\r\n====\r\n\r\n* chunshengsterATgmail.com\r\n\r\n\r\nAuthor\r\n====\r\n* Linux\\nginx\\golang\\c\\c++爱好者\r\n* 欢迎一起交流  一起学习# \r\n* Others say good and Others good\r\n\r\n\r\n","google":"nginx reload 的过程 性能的影响","note":"Don't delete this file! It's used internally to help with page regeneration."}